(function(i,t){typeof exports=="object"&&typeof module<"u"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):(i=typeof globalThis<"u"?globalThis:i||self,t(i.dist={}))})(this,function(i){"use strict";var f=Object.defineProperty;var l=(i,t,n)=>t in i?f(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n;var o=(i,t,n)=>(l(i,typeof t!="symbol"?t+"":t,n),n);class t{constructor(){o(this,"_listeners",{});o(this,"_onceListeners",{})}on(s,e){this._listeners[s]||(this._listeners[s]=new Set),this._listeners[s].add(e)}off(s,e){this._listeners[s]&&(this._listeners[s].delete(e),this._listeners[s].size===0&&delete this._listeners[s])}once(s,e){this._onceListeners[s]||(this._onceListeners[s]=new Set),this._onceListeners[s].add(e)}offOnce(s,e){this._onceListeners[s]&&(this._onceListeners[s].delete(e),this._onceListeners[s].size===0&&delete this._onceListeners[s])}emit(s,e){if(this._listeners[s])for(const r of[...this._listeners[s]])r(e);if(this._onceListeners[s]){for(const r of[...this._onceListeners[s]])r(e);delete this._onceListeners[s]}}removeAllListeners(){this._listeners={},this._onceListeners={}}}class n{constructor(){o(this,"_types",new Map);o(this,"_history",[])}get(s){return this._get(s)}set(s,e){this._types.set(s,e)}_get(s,e=[]){if(!this._types.has(s)){if(this._history.includes(s)){const _=e.map(c=>c.name).join(" -> ");throw new Error(`Circular dependency detected for ${s.name}: ${_}`)}this._history.push(s);const r=new s(this);return this._types.set(s,r),this._history.pop(),r}return this._types.get(s)}}i.Emitter=t,i.Provider=n,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
